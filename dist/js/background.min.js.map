{"version":3,"sources":["node_modules/browser-pack/_prelude.js","js/background.js","js/background/changeIcon.js","js/background/changeOnclick.js","js/background/chromeGet.js","js/background/closeTab.js","js/background/matchesRegexp.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","/Users/bartekosx/Projekty/tab-pinner-kopia/js/background.js","module","_changeIcon","_matchesRegexp","_changeOnclick","_chromeGet","_closeTab","chrome","tabs","onUpdated","addListener","tabId","changeInfo","tab","url","active","pinned","pinIcon","unpinIcon","_matchesRegexp2","default","onCreated","onActivated","activeInfo","get","timer","timerActive","browserAction","onClicked","_chromeGet2","items","settings","close","clearTimeout","_closeTab2","setTimeout","_changeOnclick2","setTitle","title","i18n","getMessage","setIcon","path","changeOnclick","update","id","move","index","chromeGet","callback","storage","sync","rules","name","regexp","position","confirm","closeTab","remove","matchesRegexp","forEach","v","expression","RegExp","test"],"mappings":"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","file":"background.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import { pinIcon, unpinIcon } from \"./background/changeIcon\";\nimport matchesRegexp from \"./background/matchesRegexp\";\nimport changeOnclick from \"./background/changeOnclick\";\nimport chromeGet from \"./background/chromeGet\";\nimport closeTab from \"./background/closeTab\";\n\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if ( changeInfo.url && tab.active ) {\n    if ( tab.pinned === true ) {\n      pinIcon();\n    } else {\n      unpinIcon();\n      matchesRegexp(tab);\n    }\n  }\n});\n\nchrome.tabs.onCreated.addListener((tab) => {\n  matchesRegexp(tab);\n});\n\n\nchrome.tabs.onActivated.addListener((activeInfo) => {\n  chrome.tabs.get(activeInfo.tabId, (tab) => {\n    if ( tab.pinned === true ) {\n      pinIcon();\n    } else {\n      unpinIcon();\n    }\n  });\n});\n\nlet timer;\nlet timerActive = false;\n\nchrome.browserAction.onClicked.addListener((tab) => {\n  chromeGet((items) => {\n    if (items.settings.close) {\n      if ( timerActive ) {\n        clearTimeout( timer );\n        closeTab(tab);\n        timerActive = false;\n      } else {\n        timer = setTimeout(() => {\n          changeOnclick(tab);\n          timerActive = false;\n        }, 200);\n        timerActive = true;\n      }\n    } else {\n      changeOnclick(tab);\n    }\n  });\n});\n","export function pinIcon() {\n  chrome.browserAction.setTitle({\n    title: chrome.i18n.getMessage( \"unpin\" ),\n  });\n\n  chrome.browserAction.setIcon({\n    path: \"imgs/icon_in.png\",\n  });\n}\n\n\nexport function unpinIcon() {\n  chrome.browserAction.setTitle({\n    title: chrome.i18n.getMessage( \"pin\" ),\n  });\n\n  chrome.browserAction.setIcon({\n    path: \"imgs/icon.png\",\n  });\n}\n","import chromeGet from \"./chromeGet\";\nimport { pinIcon, unpinIcon } from \"./changeIcon\";\n\nexport default function changeOnclick(tab) {\n  if ( tab.pinned === true ) {\n    unpinIcon();\n    chrome.tabs.update(tab.id, {\n      \"pinned\": false,\n    });\n\n    chromeGet((items) => {\n      if (items.settings.move) {\n        chrome.tabs.move(tab.id, {\n          index: -1,\n        });\n      }\n    });\n  } else {\n    pinIcon();\n    chrome.tabs.update(tab.id, {\n      \"pinned\": true,\n    });\n  }\n}\n","export default function chromeGet(callback) {\n  chrome.storage.sync.get({\n    \"rules\": [\n      {\n        \"active\": true,\n        \"name\": \"Facebook\",\n        \"regexp\": \"^http[s]?://www.facebook.com(/)?$\",\n        \"position\": 0,\n      },\n    ],\n    \"settings\": {\n      \"close\": true,\n      \"confirm\": true,\n      \"move\": true,\n    },\n  }, (items) => {\n    callback(items);\n  });\n}\n","import chromeGet from \"./chromeGet\";\n\nexport default function closeTab(tab) {\n  chromeGet((items) => {\n    const close = (items.settings.confirm === true) ? confirm( chrome.i18n.getMessage( \"close_conf_msg\" ) ) : true; // eslint-disable-line no-alert\n    if (close) {\n      chrome.tabs.remove(tab.id);\n    }\n  });\n}\n","import chromeGet from \"./chromeGet\";\n\nexport default function matchesRegexp(tab) {\n  chromeGet((items) => {\n    const rules = items.rules;\n    rules.forEach((v) => {\n      if ( v !== null && v.active === true && v.regexp !== \"\" ) {\n        const regexp = v.regexp;\n        const expression = new RegExp(regexp);\n        const position = v.position;\n        if ( expression.test(tab.url) ) {\n          chrome.tabs.update(tab.id, {\n            \"pinned\": true,\n          });\n\n          if ( position !== \"\" ) {\n            chrome.tabs.move(tab.id, {\n              index: position * 1,\n            });\n          }\n        }\n      }\n    });\n  });\n}\n"]}